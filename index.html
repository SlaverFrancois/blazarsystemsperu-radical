<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Directing Template">
    <meta name="keywords" content="Directing, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Directing | Template</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="css/flaticon.css" type="text/css">
    <link rel="stylesheet" href="css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="css/barfiller.css" type="text/css">
    <link rel="stylesheet" href="css/magnific-popup.css" type="text/css">
    <link rel="stylesheet" href="css/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Header Section Begin -->
    <header class="header">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-3 col-md-3">
                    <div class="header__logo">
                        <a href="./index.html"><img src="img/logo.png" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-9 col-md-9">
                    <div class="header__nav">
                        <nav class="header__menu mobile-menu">
                            <ul>
                                <li class="active"><a href="./index.html">Home</a></li>
                                <li><a href="./listing.html">Listing</a></li>
                                <li><a href="#">Categories</a></li>
                                <li><a href="#">Pages</a>
                                    <ul class="dropdown">
                                        <li><a href="./about.html">About</a></li>
                                        <li><a href="./listing-details.html">Listing Details</a></li>
                                        <li><a href="./blog-details.html">Blog Details</a></li>
                                        <li><a href="./contact.html">Contact</a></li>
                                    </ul>
                                </li>
                                <li><a href="./blog.html">Blog</a></li>
                                <li><a href="#">Shop</a></li>
                            </ul>
                        </nav>
                        <div class="header__menu__right">
                            <a href="#" class="primary-btn"><i class="fa fa-plus"></i>Add Listing</a>
                            <a href="#" class="login-btn"><i class="fa fa-user"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div id="mobile-menu-wrap"></div>
        </div>
    </header>
    <!-- Header Section End -->
   <!-- Categories Section Begin -->
    <section class="categories spad" id="categories-section">
    <div class="container">
        <div class="row" id="categories-container">
        <div class="col-lg-12">
            <div class="section-title">
            <h2>Gran Red Local de Anunciantes</h2>
            <p>Compra, vende y ofrece servicios — todo en un solo lugar</p>
            </div>

            <div class="tab-content">
            <div class="tab-pane active" id="tabs-1" role="tabpanel">
                <div class="row"><!-- Aquí se insertan los cards dinámicamente --></div>
            </div>
            </div>
        </div>
        </div>
    </div>
    </section>
    <!-- Categories Section End -->

        <!-- Blog Section Begin -->
    <section class="news-post spad" id="results-section" style="display:none;">
    <div class="container">
        <div class="section-title d-flex justify-content-between align-items-center">
        <h2>Profesionales disponibles</h2>
        <button id="backBtn" class="btn btn-secondary">← Volver</button>
        </div>
        <div class="row" id="professionals-container"><!-- Aquí se insertan los resultados --></div>
    </div>
    </section>
    <!-- Blog Section End -->
      
    <!-- Footer Section Begin -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6">
                    <div class="footer__about">
                        <div class="footer__about__logo">
                            <a href="./index.html"><img src="img/footer-logo.png" alt=""></a>
                        </div>
                        <p>Challenging the way things have always been done can lead to creative new options that reward
                            you.</p>
                    </div>
                </div>
                <div class="col-lg-4 offset-lg-1 col-md-6">
                    <div class="footer__address">
                        <ul>
                            <li>
                                <span>Call Us:</span>
                                <p>(+12) 345-678-910</p>
                            </li>
                            <li>
                                <span>Email:</span>
                                <p>info.colorlib@gmail .com</p>
                            </li>
                            <li>
                                <span>Fax:</span>
                                <p>(+12) 345-678-910</p>
                            </li>
                            <li>
                                <span>Connect Us:</span>
                                <div class="footer__social">
                                    <a href="#"><i class="fa fa-facebook"></i></a>
                                    <a href="#"><i class="fa fa-instagram"></i></a>
                                    <a href="#"><i class="fa fa-twitter"></i></a>
                                    <a href="#"><i class="fa fa-skype"></i></a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 offset-lg-1 col-md-6">
                    <div class="footer__widget">
                        <ul>
                            <li><a href="#">Home</a></li>
                            <li><a href="#">Support</a></li>
                            <li><a href="#">How it work</a></li>
                            <li><a href="#">Contact</a></li>
                            <li><a href="#">Blog</a></li>
                        </ul>
                        <ul>
                            <li><a href="#">Sign In</a></li>
                            <li><a href="#">How it Work</a></li>
                            <li><a href="#">Advantages</a></li>
                            <li><a href="#">Direo App</a></li>
                            <li><a href="#">Packages</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="footer__copyright">
                        <div class="footer__copyright__text"><p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
                        </div>
                        <div class="footer__copyright__links">
                            <a href="#">Terms</a>
                            <a href="#">Privacy Policy</a>
                            <a href="#">Cookie Policy</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer Section End -->

    <!-- Js Plugins -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.nicescroll.min.js"></script>
    <script src="js/jquery.barfiller.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  fetch('categories.json')
    .then(res => {
      if (!res.ok) throw new Error('No se pudo cargar el JSON');
      return res.json();
    })
    .then(categories => {
      const container = document.querySelector('.categories__item__list');
      // Asegurarnos de limpiar antes (por si acaso)
      container.innerHTML = '';
      categories.forEach(cat => {
        const div = document.createElement('div');
        // estructura IDENTICA a la original
        div.className = 'categories__item';
        div.innerHTML = `
          <img src="${cat.img}" alt="${cat.title}">
          <h5>${cat.title}</h5>
          <span>${cat.count}</span>
        `;
        container.appendChild(div);
      });
    })
    .catch(err => console.error('Error cargando categorías:', err));
});
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const categoriesContainer = document.querySelector('#categories-container');
  const resultsSection = document.querySelector('#results-section');
  const categoriesSection = document.querySelector('#categories-section');
  const professionalsContainer = document.querySelector('#professionals-container');
  const backBtn = document.querySelector('#backBtn');

  // 🔹 Cargar categorías
  fetch('categories.json')
    .then(res => res.json())
    .then(categories => {
      categories.forEach(cat => {
        const col = document.createElement('div');
        col.className = 'col-lg-4 col-md-6';
        col.innerHTML = `
          <div class="listing__item category-card" data-category="${cat.title.toLowerCase()}">
            <div class="listing__item__text">
              <div class="listing__item__text__info">
                <div class="listing__item__text__info__left">
                  <img src="${cat.img}" alt="${cat.title}">
                  <span>${cat.title}</span>
                </div>
                <div class="listing__item__text__info__right">></div>
              </div>
            </div>
          </div>
        `;
        categoriesContainer.appendChild(col);
      });

      // 🔹 Escuchar clic en cada card
      document.querySelectorAll('.category-card').forEach(card => {
        card.addEventListener('click', e => {
          const selectedCategory = card.dataset.category;
          showProfessionals(selectedCategory);
        });
      });
    });

 function showProfessionals(category) {
  fetch('professionals.json')
    .then(res => res.json())
    .then(data => {
      const filtered = data.filter(p => p.category.toLowerCase() === category);

      // ✅ Envolver correctamente en backticks
      professionalsContainer.innerHTML = `
        <div class="col-lg-4 col-md-6">
          <div class="blog__item advertise-card">
            <div class="blog__item__text text-center">
              <h5>¿Eres ${category}? 📢</h5>
              <p>Anúnciate aquí y llega a cientos de clientes locales.</p>
              <a href="https://forms.gle/TU_FORMULARIO_DE_GOOGLE" 
                 target="_blank" 
                 class="btn-advertise">Publica tu servicio</a>
            </div>
          </div>
        </div>
      `;

      if (filtered.length === 0) {
        professionalsContainer.innerHTML += `<p>No hay profesionales en esta categoría.</p>`;
      } else {
        filtered.forEach(p => {
          const div = document.createElement('div');
          div.className = 'col-lg-4 col-md-6';
          div.innerHTML = `
            <div class="blog__item">
              <div class="blog__item__text">
                <ul class="blog__item__tags">
                  <li><i class="fa fa-tags"></i> ${p.category}</li>
                </ul>
                <h5>${p.description}</h5>
                <ul class="blog__item__widget">
                  <li><i class="fa icon_phone"></i> ${p.phone}</li>
                  <li><i class="fa icon_pin_alt"></i> ${p.location}</li>
                  <li><i class="fa fa-user"></i> ${p.name}</li>
                  <li>
                    <a href="https://www.youtube.com/embed/${p.portfolio}?autoplay=1"
                       class="video-popup listing__item__pic__tag"
                       target="_blank" rel="noopener noreferrer">
                      Ver trabajos realizados
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          `;
          professionalsContainer.appendChild(div);
        });

        // Activar Magnific Popup si existe
        if (window.jQuery && $.fn.magnificPopup) {
          $('.video-popup').magnificPopup({
            type: 'iframe',
            iframe: {
              patterns: {
                youtube: {
                  index: 'youtube.com/',
                  id: 'embed/',
                  src: '%id%'
                }
              }
            }
          });
        }
      }
// Mostrar resultados
if (categoriesSection && resultsSection) {
  categoriesSection.style.display = 'none';
  resultsSection.style.display = 'block';
  backBtn.style.display = 'block';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
}); // ← Cierra fetch professionals.json
} // ← Cierra función showProfessionals

// 🔹 Mostrar/ocultar el botón volver
backBtn.style.display = 'none';
backBtn.addEventListener('click', () => {
  resultsSection.style.display = 'none';
  categoriesSection.style.display = 'block';
  backBtn.style.display = 'none';
});
}); // ← Cierra el DOMContentLoaded
</script>
</body>
</html>
